<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2. Getting started &mdash; MC Users Guide 0.0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/drawio.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3. Source code structure" href="SourceCodeStructure.html" />
    <link rel="prev" title="1. Introduction" href="Introduction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #FBFBFB" >
            <a href="index.html">
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.0.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">1. Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. Getting started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">2.1. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-simulations">2.2. Running simulations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#output-and-visualization">2.3. Output and visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#debugging">2.4. Debugging</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="SourceCodeStructure.html">3. Source code structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="Shower.html">4. Shower</a></li>
<li class="toctree-l1"><a class="reference internal" href="Geometry.html">5. Geometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="Transports.html">6. Transports</a></li>
<li class="toctree-l1"><a class="reference internal" href="Scores.html">7. Scores</a></li>
<li class="toctree-l1"><a class="reference internal" href="Sources.html">8. Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="ReferenceApplication.html">9. Reference application</a></li>
<li class="toctree-l1"><a class="reference internal" href="Validation.html">10. Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Examples.html">11. Examples</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #FBFBFB" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MC Users Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">2. </span>Getting started</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/RadOncSys/MCDocs/blob/main/Manual/source/GettingStarted.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="getting-started">
<h1><span class="section-number">2. </span>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this heading"></a></h1>
<section id="installation">
<h2><span class="section-number">2.1. </span>Installation<a class="headerlink" href="#installation" title="Permalink to this heading"></a></h2>
<p>Project assume to build under <strong>Visual Studio 2017 Community edition</strong>.</p>
<p>To build it just clone or download it from the <strong>GitHub</strong> and open solution.</p>
<p>Solution consists of four projects.</p>
<table class="colwidths-given docutils align-default" id="projects-table" style="width: 90%">
<caption><span class="caption-number">Table 2.1.1 </span><span class="caption-text">List of projects</span><a class="headerlink" href="#projects-table" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Project</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Geometry</strong></p></td>
<td><p>Small internal use geometry base classes, like vectors, matrixes, planes, etc</p></td>
</tr>
<tr class="row-odd"><td><p><strong>MC</strong></p></td>
<td><p>Core <em>Monte Carlo</em> library</p></td>
</tr>
<tr class="row-even"><td><p><strong>MC.Tests</strong></p></td>
<td><p>Some collection of tests. Valuable learning resource</p></td>
</tr>
<tr class="row-odd"><td><p><strong>MCSimulator</strong></p></td>
<td><p>Complex executable, which uses full power of MC library and can be used standalone.
Most practical tasks can be completely described by XML input files</p></td>
</tr>
</tbody>
</table>
</section>
<section id="running-simulations">
<h2><span class="section-number">2.2. </span>Running simulations<a class="headerlink" href="#running-simulations" title="Permalink to this heading"></a></h2>
<p><strong>MC</strong> library can be used to program custom tasks. Source code for <strong>MCSimulator</strong>
fully demonstrates how to do that and can be considered as reference implementation.
It is very like <strong>EGS4</strong> workflow.</p>
<p><strong>MCSimulator</strong> can be used as ready to use <em>Monte Carlo</em> simulator.
It takes two <em>XML</em> input files to describe the task. First file describes simulation conditions.
Second file describes simulation geometry.</p>
<p><strong>Data/XML</strong> folder contains some input examples.</p>
<p>To run simulations you need to create a folder for the task and
copy there <strong>MCSimulator.exe</strong> and input files.
Then you need to have side by side to this folder data folder
with <strong>PEGS4</strong> input file (<strong>AcceleratorSimulator.pegs4dat</strong> for now).</p>
<p>Here are some examples to run simulations from the samples data:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">MCSimulator S_C60_sphere.xml G_C60_sphere.xml</span>
<span class="go">MCSimulator S_CK_6X.xml G_CyberKnife.xml</span>
<span class="go">MCSimulator S_Ross.xml G_Ross.xml</span>
<span class="go">MCSimulator S_Target.xml G_Target.xml</span>
</pre></div>
</div>
</section>
<section id="output-and-visualization">
<h2><span class="section-number">2.3. </span>Output and visualization<a class="headerlink" href="#output-and-visualization" title="Permalink to this heading"></a></h2>
<p><strong>MCSimulator</strong> produces two output files.
Their names indicated in simulation conditions <strong>XML</strong> file.
One file (<strong>.dat</strong>) contains numerical results of simulations.
The other one is <strong>VRML</strong> graphical dump (<strong>.wrl</strong>). It can be viewed many <strong>VRML</strong> viewers.
The recommended old style perfect one can be unzipped from this project <strong>./Data/vrmlview.zip</strong> file.</p>
</section>
<section id="debugging">
<h2><span class="section-number">2.4. </span>Debugging<a class="headerlink" href="#debugging" title="Permalink to this heading"></a></h2>
<p>Debugging is a valuable tool to study code.</p>
<p>To run <em>MCSimulator</em> in debug build debug version. Click right mouse button over
<em>MCSimulator</em> project in the Solution Explorer and select Set as StartUp Project.</p>
<p><em>MCSimulator</em> by default uses all <em>CPU</em> cores.
This will cause difficulties in stepping in the code due to jumping through different threads.
You can switch to single thread by directly setting variable nThreads to one in the main function.
See fragment of <em>MCSimulator.cpp</em> below.</p>
<div class="highlight-CPP notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span><span class="w"></span>
<span class="c1">//int nThreads = concurrency::GetProcessorCount();</span>
<span class="kt">int</span><span class="w"> </span><span class="n">nThreads</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>The tricky part is providing program arguments and working directory.
It should be done through the MCSimulator project properties.
One possible scenario for the GitHub version of folders structures is shown in the next figure
<a class="reference internal" href="#debug-properties-figure"><span class="std std-numref">(Fig. 2.4.1)</span></a>.
First time create folder <em>MCwork</em> where you will run debug simulation.</p>
<figure class="align-center" id="debug-properties-figure">
<img alt="_images/DebugProperties.png" src="_images/DebugProperties.png" style="width: 100%;" />
<figcaption>
<p><span class="caption-number">Fig. 2.4.1 </span><span class="caption-text">Debug Properties.</span><a class="headerlink" href="#debug-properties-figure" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Then start debugging.</p>
<p>Remember about the code execution performance.
In the past the difference in speed between debug and release was of the order of 2.
Modern compiler continuously improve and use hardware features including GPU even if programmer did not request that.
Now the speed up can be up to an order or more depending on code.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Introduction.html" class="btn btn-neutral float-left" title="1. Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="SourceCodeStructure.html" class="btn btn-neutral float-right" title="3. Source code structure" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-23, ROISS.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>